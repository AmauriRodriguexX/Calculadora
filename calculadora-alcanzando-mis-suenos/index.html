<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Gastos Hormiga</title>
    
    <!-- Bootstrap y Estilos CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/desktp-mobile.css">
</head>
<body>
    <div class="container mt-top-100-40">
     <div class="text-end">
          <p class="text-end p-tab-next-step ">Paso 1 de 3</p>
     </div>
        <h1 class="text-center">Calculadoras Financieras 3</h1>
        <nav class="tabs">
          <!-- Gastos hormiga -->
          <a href="../calculadora-gastos-hormiga/index.html" 
            class="tab-item">
            Gastos hormiga
          </a>
          
          <!-- Organizando gastos -->
          <a href="../calculadora-organizando-mis-gastos/index.html" 
            class="tab-item">
            Organizando gastos
          </a>
          
          <!-- Alcanzando sueños -->
          <a href="../calculadora-alcanzando-mis-suenos/index.html" 
            class="tab-item active">Alcanzando sueños
          </a>
        </nav>
        
        <!-- Sección 1: Ingresar ingresos -->
        <section id="desktop1" class="calculadora-section">
            <h2>Paso 1 de 3</h2>
            <label for="ingresos">Ingresos mensuales:</label>
            <input type="number" id="ingresos" class="form-control" placeholder="Ingresa tu salario">
            <button class="btn btn-primary mt-3" onclick="guardarIngresos()">Continuar</button>
        </section>

        <!-- Sección 2: Agregar gastos -->
        <section id="desktop2" class="calculadora-section">
            <h2>Paso 2 de 3</h2>
            <p>Agrega tus gastos</p>
            <input type="text" id="nombre-gasto" class="form-control" placeholder="Ejemplo: Café">
            <input type="number" id="valor-gasto" class="form-control mt-2" placeholder="Monto diario">
            <button class="btn btn-success mt-2" onclick="agregarGasto()">+ Agregar</button>
            <ul id="lista-gastos" class="mt-3"></ul>
            <button class="btn btn-primary mt-3" onclick="calcularTotales()">Siguiente</button>
        </section>

        <!-- Sección 3: Resumen -->
        <section id="desktop3" class="calculadora-section">
            <h2>Paso 3 de 3</h2>
            <p><strong>Ingresos Mensuales:</strong> <span id="ingresos-mostrar">$0</span></p>
            <p><strong>Total Gastos:</strong> <span id="total-gastos">$0</span></p>
            <p><strong>Porcentaje Gastado:</strong> <span id="porcentaje">0%</span></p>
            <button class="btn btn-secondary" onclick="mostrarSeccion(2)">Atrás</button>
            <button class="btn btn-success">Guardar o Compartir</button>
        </section>
    </div>

    <!-- Scripts -->
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script>
        function mostrarSeccion(numero) {
            document.querySelectorAll('.calculadora-section').forEach(seccion => {
                seccion.style.display = 'none';
            });
            document.getElementById(`desktop${numero}`).style.display = 'block';
        }

        function guardarIngresos() {
            let ingresos = document.getElementById("ingresos").value;
            localStorage.setItem("ingresos", ingresos);
            mostrarSeccion(2);
        }

        function agregarGasto() {
            let nombre = document.getElementById("nombre-gasto").value;
            let valor = document.getElementById("valor-gasto").value;
            if (nombre && valor) {
                let gastos = JSON.parse(localStorage.getItem("gastos")) || [];
                gastos.push({ nombre, valor: parseFloat(valor) });
                localStorage.setItem("gastos", JSON.stringify(gastos));
                actualizarListaGastos();
            }
        }

        function actualizarListaGastos() {
            let gastos = JSON.parse(localStorage.getItem("gastos")) || [];
            let lista = document.getElementById("lista-gastos");
            lista.innerHTML = "";
            gastos.forEach(gasto => {
                lista.innerHTML += `<li>${gasto.nombre}: $${gasto.valor} diarios</li>`;
            });
        }

        function calcularTotales() {
            let ingresos = parseFloat(localStorage.getItem("ingresos")) || 0;
            let gastos = JSON.parse(localStorage.getItem("gastos")) || [];
            let totalMensual = gastos.reduce((acc, gasto) => acc + (gasto.valor * 30), 0);
            let porcentaje = (totalMensual / ingresos) * 100;
            document.getElementById("ingresos-mostrar").innerText = `$${ingresos}`;
            document.getElementById("total-gastos").innerText = `$${totalMensual}`;
            document.getElementById("porcentaje").innerText = `${porcentaje.toFixed(2)}%`;
            mostrarSeccion(3);
        }

        document.addEventListener("DOMContentLoaded", () => {
            mostrarSeccion(1);
        });
    </script>
</body>
</html>
